<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ë¡œë˜ 5ê²Œì„ ì¶”ì²œê¸° (ëª¨ë°”ì¼ ìµœì í™”)</title>

<style>
  :root {
    --bg: #f4f6fb;
    --card: #ffffff;
    --text: #111;
    --muted: #666;
    --border: #e9ecf3;
    --primary: #1f6fff;
    --ghost: #eef3ff;
    --ghostBorder: #d7e4ff;
  }

  body.dark {
    --bg: #121418;
    --card: #1b1f26;
    --text: #f1f3f8;
    --muted: #9aa3b2;
    --border: #2a2f38;
    --primary: #4f8cff;
    --ghost: #222a3a;
    --ghostBorder: #2f3a52;
  }

  body {
    margin: 0;
    font-family: system-ui, -apple-system, "Noto Sans KR", sans-serif;
    background: var(--bg);
    color: var(--text);
    /* ëª¨ë°”ì¼ ë¸Œë¼ìš°ì € ì£¼ì†Œì°½ ë†’ì´ë¥¼ ê³ ë ¤í•œ dvh ì‚¬ìš©, ìƒí•˜ ì—¬ë°± ì¶”ê°€ */
    min-height: 100dvh;
    padding: 20px 0;
    box-sizing: border-box;
    display: grid;
    place-items: center;
    transition: background .25s ease, color .25s ease;
    overflow-x: hidden;
  }

  .card {
    width: min(920px, 92vw);
    background: var(--card);
    border-radius: 18px;
    padding: 26px;
    box-shadow: 0 12px 30px rgba(0,0,0,.10);
    transition: background .25s ease;
    position: relative;
    z-index: 10;
    box-sizing: border-box;
  }

  h1 {
    margin: 0 0 6px;
    font-size: 22px;
    letter-spacing: -0.2px;
  }
  .sub {
    margin: 0 0 16px;
    font-size: 13px;
    color: #444;
  }
  body.dark .sub { color: var(--muted); }

  .controls {
    display: flex;
    gap: 10px;
    margin-bottom: 18px;
  }

  button {
    border: none;
    border-radius: 12px;
    padding: 14px 16px;
    cursor: pointer;
    font-weight: 900;
    font-size: 15px;
    transition: transform .06s ease, filter .2s ease, opacity .2s ease;
    /* ëª¨ë°”ì¼ì—ì„œ ë¹ ë¥¸ í„°ì¹˜ ì‹œ í™”ë©´ í™•ëŒ€ ë°©ì§€ */
    touch-action: manipulation;
  }
  button:active { transform: translateY(1px); }
  button[disabled] { opacity: .6; cursor: not-allowed; }

  #btnPick {
    flex: 1.2;
    background: var(--primary);
    color: white;
  }
  #btnCopy {
    flex: .8;
    background: var(--ghost);
    color: var(--primary);
    border: 1px solid var(--ghostBorder);
  }

  .grid {
    display: grid;
    grid-template-columns: repeat(2, minmax(0, 1fr));
    gap: 14px;
  }
  
  /* í…Œë¸”ë¦¿ ì‚¬ì´ì¦ˆ ìµœì í™” */
  @media (max-width: 720px){
    .grid { grid-template-columns: 1fr; }
  }

  .game {
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 14px;
    background: rgba(255,255,255,.35);
  }
  body.dark .game {
    background: rgba(255,255,255,.03);
  }

  .game-head {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 10px;
  }
  .game-title { font-weight: 900; }

  .status {
    font-size: 12px;
    color: var(--muted);
    display: flex;
    align-items: center;
    gap: 6px;
  }
  .dot {
    width: 8px; height: 8px;
    border-radius: 999px;
    background: #b7bccb;
  }
  .dot.run { background: var(--primary); box-shadow: 0 0 0 6px rgba(31,111,255,.12); }
  .dot.done { background: #20b26b; box-shadow: 0 0 0 6px rgba(32,178,107,.12); }

  .nums {
    display: flex;
    gap: 8px;
    flex-wrap: wrap;
    align-items: center;
    justify-content: flex-start;
  }

  .ball {
    width: 46px;
    height: 46px;
    border-radius: 999px;
    display: grid;
    place-items: center;
    font-weight: 900;
    font-size: 16px;
    color: #fff;
    box-shadow: 0 6px 12px rgba(0,0,0,.12);
    user-select: none;
    transition: transform .14s ease, filter .2s ease;
  }

  .plus {
    font-weight: 900;
    font-size: 20px;
    color: var(--muted);
    margin: 0 2px;
  }

  /* ğŸ“± ëª¨ë°”ì¼(ì‘ì€ í™”ë©´) ìµœì í™” */
  @media (max-width: 480px){
    .card { padding: 20px 16px; }
    h1 { font-size: 20px; }
    .sub { font-size: 12px; }
    .controls { gap: 8px; }
    button { padding: 12px; font-size: 14px; }
    .game { padding: 12px; }
    
    /* ì‘ì€ í™”ë©´ì—ì„œ ê³µì´ ì¤„ë°”ê¿ˆ ë˜ì§€ ì•Šë„ë¡ í¬ê¸°/ê°„ê²© ì¡°ì ˆ */
    .nums { gap: 5px; justify-content: center; }
    .ball { width: 36px; height: 36px; font-size: 14px; }
    .plus { font-size: 16px; margin: 0 1px; }
    
    .theme-fab { 
      right: 12px; 
      bottom: 12px; 
      width: 44px; 
      height: 44px; 
      font-size: 20px; 
    }
  }

  .ball.spin {
    filter: brightness(1.06);
    animation: wobble .18s infinite alternate;
  }

  .ball.pop {
    animation: pop .18s ease;
  }

  .ball.flash {
    animation: flash 0.55s ease;
  }

  @keyframes wobble {
    from { transform: translateY(-1px) rotate(-2deg); }
    to { transform: translateY(1px) rotate(2deg); }
  }

  @keyframes pop {
    0% { transform: scale(1); }
    55% { transform: scale(1.12); }
    100% { transform: scale(1); }
  }

  @keyframes flash {
    0% { box-shadow: 0 0 0 rgba(138,43,226,0), 0 6px 12px rgba(0,0,0,.12); }
    35% { box-shadow: 0 0 18px rgba(138,43,226,.8), 0 6px 12px rgba(0,0,0,.12); }
    100% { box-shadow: 0 0 0 rgba(138,43,226,0), 0 6px 12px rgba(0,0,0,.12); }
  }

  /* ë²ˆí˜¸ êµ¬ê°„ë³„ ìƒ‰ìƒ */
  .yellow { background: #fbc400; }
  .blue { background: #4aa3ff; }
  .red { background: #ff4a4a; }
  .gray { background: #999; }
  .green { background: #4caf50; }

  /* ë³´ë„ˆìŠ¤ ê°•ì¡° */
  .bonus {
    border: 4px solid #8a2be2;
    box-sizing: border-box;
  }

  .meta {
    text-align: center;
    font-size: 13px;
    color: var(--muted);
    margin-top: 14px;
  }

  .theme-fab {
    position: fixed;
    right: 18px;
    bottom: 18px;
    width: 50px;
    height: 50px;
    border-radius: 999px;
    border: 1px solid var(--border);
    background: var(--card);
    color: var(--text);
    box-shadow: 0 10px 22px rgba(0,0,0,.18);
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0;
    line-height: 1;
    font-size: 24px;
    cursor: pointer;
    transition: transform .18s ease, background .25s ease, color .25s ease, border .25s ease;
    z-index: 50;
    /* ëª¨ë°”ì¼ ë”ë¸” íƒ­ í™•ëŒ€ ë°©ì§€ */
    touch-action: manipulation;
  }
  .theme-fab:hover { transform: scale(1.08); }
  .theme-fab:active { transform: scale(1.03); }

</style>
</head>

<body>

<main class="card" id="card">
  <h1>ğŸ² ë¡œë˜ 5ê²Œì„ ì¶”ì²œê¸°</h1>
  <p class="sub">ë“œë¥´ë¥µ ëŒë‹¤ê°€ ê²Œì„ë³„ë¡œ â€œë”±!â€ ë©ˆì¶”ê³ , ë³´ë„ˆìŠ¤ëŠ” ë§ˆì§€ë§‰ì— ë²ˆì© âœ¨</p>

  <div class="controls">
    <button id="btnPick">ì¶”ì²¨ ì‹œì‘í•˜ê¸°</button>
    <button id="btnCopy" type="button">ì „ì²´ ë³µì‚¬</button>
  </div>

  <section class="grid" id="grid"></section>
  <div class="meta" id="meta">ëŒ€ê¸° ì¤‘â€¦</div>
</main>

<button class="theme-fab" id="themeBtn" aria-label="í…Œë§ˆ ì „í™˜"></button>

<script>
  const GAME_COUNT = 5;
  const MAIN_COUNT = 6;
  const MAX_NUM = 45;

  const grid = document.getElementById("grid");
  const btnPick = document.getElementById("btnPick");
  const btnCopy = document.getElementById("btnCopy");
  const meta = document.getElementById("meta");
  const themeBtn = document.getElementById("themeBtn");

  let lastResults = [];
  let running = false;

  /* ----------------- í…Œë§ˆ ----------------- */
  function applyTheme(theme){
    if(theme === "dark"){
      document.body.classList.add("dark");
      themeBtn.textContent = "ğŸŒ™";
    } else {
      document.body.classList.remove("dark");
      themeBtn.textContent = "â˜€";
    }
  }

  function toggleTheme(){
    const current = document.body.classList.contains("dark") ? "dark" : "light";
    const next = current === "dark" ? "light" : "dark";
    localStorage.setItem("theme", next);
    applyTheme(next);
  }

  themeBtn.addEventListener("click", toggleTheme);
  applyTheme(localStorage.getItem("theme") || "light");

  /* ----------------- ë¡œë˜ ìœ í‹¸ ----------------- */
  function getColorClass(n){
    if (n <= 10) return "yellow";
    if (n <= 20) return "blue";
    if (n <= 30) return "red";
    if (n <= 40) return "gray";
    return "green";
  }

  function pickOneGameFinal(){
    const set = new Set();
    while(set.size < MAIN_COUNT + 1){
      set.add(Math.floor(Math.random() * MAX_NUM) + 1);
    }
    const arr = [...set];
    const main = arr.slice(0, MAIN_COUNT).sort((a,b)=>a-b);
    const bonus = arr[MAIN_COUNT];
    return { main, bonus };
  }

  function delay(ms){ return new Promise(res => setTimeout(res, ms)); }

  /* ----------------- UI êµ¬ì„± ----------------- */
  function buildGameCards(){
    grid.innerHTML = "";
    for (let g = 0; g < GAME_COUNT; g++){
      const cardEl = document.createElement("div");
      cardEl.className = "game";
      cardEl.dataset.index = String(g);

      const head = document.createElement("div");
      head.className = "game-head";

      const title = document.createElement("div");
      title.className = "game-title";
      title.textContent = `ê²Œì„ ${g+1}`;

      const status = document.createElement("div");
      status.className = "status";
      status.innerHTML = `<span class="dot"></span><span>ëŒ€ê¸°</span>`;

      head.appendChild(title);
      head.appendChild(status);

      const nums = document.createElement("div");
      nums.className = "nums";

      // ë©”ì¸ ë²ˆí˜¸ 6ê°œ
      for (let i = 0; i < MAIN_COUNT; i++){
        const b = document.createElement("div");
        b.className = "ball gray";
        b.textContent = "â€“";
        nums.appendChild(b);
      }

      // â• ë³´ë„ˆìŠ¤ ë¶„ë¦¬ ê¸°í˜¸
      const plus = document.createElement("div");
      plus.className = "plus";
      plus.textContent = "+";
      nums.appendChild(plus);

      // ë³´ë„ˆìŠ¤ ë²ˆí˜¸ 1ê°œ
      const bonusBall = document.createElement("div");
      bonusBall.className = "ball gray bonus";
      bonusBall.textContent = "â€“";
      nums.appendChild(bonusBall);

      cardEl.appendChild(head);
      cardEl.appendChild(nums);
      grid.appendChild(cardEl);
    }
  }

  function setStatus(gameIndex, mode, text){
    const cardEl = grid.querySelector(`.game[data-index="${gameIndex}"]`);
    const status = cardEl.querySelector(".status");
    const dot = status.querySelector(".dot");
    const label = status.querySelector("span:last-child");

    dot.classList.remove("run", "done");
    if (mode === "run") dot.classList.add("run");
    if (mode === "done") dot.classList.add("done");
    label.textContent = text;
  }

  function spinTickRandomizeAll(gameIndex){
    const cardEl = grid.querySelector(`.game[data-index="${gameIndex}"]`);
    const balls = cardEl.querySelectorAll(".ball");
    
    for (let i = 0; i < balls.length; i++){
      // í™•ì •ëœ(locked) ê³µì€ ë” ì´ìƒ ëŒë¦¬ì§€ ì•ŠìŒ!
      if (balls[i].dataset.locked === "true") continue;
      
      const n = Math.floor(Math.random() * MAX_NUM) + 1;
      balls[i].className = `ball ${getColorClass(n)} spin` + (i === MAIN_COUNT ? " bonus" : "");
      balls[i].textContent = n;
    }
  }

  function setBall(gameIndex, pos, value, isBonus=false, flash=false){
    const cardEl = grid.querySelector(`.game[data-index="${gameIndex}"]`);
    const balls = cardEl.querySelectorAll(".ball");
    const ball = balls[pos];

    ball.dataset.locked = "true"; // ê³µ ì ê¸ˆ ì²˜ë¦¬

    ball.className = `ball ${getColorClass(value)}` + (isBonus ? " bonus" : "");
    ball.textContent = value;

    // "ë”±!" ëŠë‚Œ
    ball.classList.remove("spin");
    ball.classList.add("pop");
    if (flash) ball.classList.add("flash");

    setTimeout(() => {
      ball.classList.remove("pop");
      ball.classList.remove("flash");
    }, 260);
  }

  /* ----------------- ì• ë‹ˆë©”ì´ì…˜ ì¶”ì²¨ ----------------- */
  async function runDraw(){
    if (running) return;
    running = true;

    btnPick.disabled = true;
    btnCopy.disabled = true;
    lastResults = [];

    // ğŸ”¥ ì¶”ì²¨ ë²„íŠ¼ì„ ë‹¤ì‹œ ëˆ„ë¥¼ ë•Œ í™”ë©´ì„ ê¹¨ë—í•˜ê²Œ ì´ˆê¸°í™”
    buildGameCards(); 
    meta.textContent = "ì¶”ì²¨ ì¤‘â€¦ (ëŒì•„ê°€ëŠ” ë§›!)";

    // ëª¨ë“  ê²Œì„ ìŠ¤í•€ ì‹œì‘
    const intervals = [];
    for (let g = 0; g < GAME_COUNT; g++){
      setStatus(g, "run", "ì¶”ì²¨ ì¤‘");
      const id = setInterval(() => spinTickRandomizeAll(g), 60);
      intervals.push(id);
    }

    // ê²Œì„ë³„ë¡œ ìˆœì°¨ í™•ì •
    for (let g = 0; g < GAME_COUNT; g++){
      await delay(500); // ì´ì „ ê²Œì„ í™•ì • í›„ ëŒ€ê¸°ì‹œê°„

      const final = pickOneGameFinal();
      lastResults[g] = final;

      // ë©”ì¸ 6ê°œë¥¼ í•˜ë‚˜ì”© "ë”±!" í™•ì •
      for (let i = 0; i < MAIN_COUNT; i++){
        await delay(120);
        setBall(g, i, final.main[i], false, false);
      }

      // ë³´ë„ˆìŠ¤ëŠ” ì‚´ì§ ëœ¸ ë“¤ì˜€ë‹¤ê°€ ë²ˆì©
      await delay(300);
      setBall(g, MAIN_COUNT, final.bonus, true, true);

      // í•´ë‹¹ ê²Œì„ì˜ ê³µì´ ëª¨ë‘ í™•ì •ë˜ì—ˆìœ¼ë¯€ë¡œ íƒ€ì´ë¨¸ ì¢…ë£Œ
      clearInterval(intervals[g]);

      // ì™„ë£Œ ì´í™íŠ¸
      setStatus(g, "done", "ì™„ë£Œ");
    }

    meta.textContent = "ìƒì„± ì‹œê°„: " + new Date().toLocaleString("ko-KR", { hour12: false });

    btnPick.disabled = false;
    btnCopy.disabled = false;
    running = false;
  }

  function formatAllResults(results){
    return results.map((r, idx) =>
      `ê²Œì„ ${idx + 1}: ${r.main.join(", ")} + ë³´ë„ˆìŠ¤ ${r.bonus}`
    ).join("\n");
  }

  btnPick.addEventListener("click", runDraw);

  btnCopy.addEventListener("click", async () => {
    if (!lastResults.length){
      alert("ë¨¼ì € ì¶”ì²¨ì„ ì§„í–‰í•´ì£¼ì„¸ìš”!");
      return;
    }
    const text = formatAllResults(lastResults);
    try{
      await navigator.clipboard.writeText(text);
      meta.textContent = "ë³µì‚¬ ì™„ë£Œ! âœ…";
    } catch {
      const ta = document.createElement("textarea");
      ta.value = text;
      document.body.appendChild(ta);
      ta.select();
      document.execCommand("copy");
      ta.remove();
      meta.textContent = "ë³µì‚¬ ì™„ë£Œ! âœ…";
    }
  });

  // ì´ˆê¸° UI ì„¸íŒ…
  buildGameCards();
</script>
</body>
</html>